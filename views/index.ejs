<%- include("partials/header") %>

<div class="hero">
  <% if(newsList.length > 0){ %>
    <img src="/uploads/<%= newsList[0].image %>" alt="Hero News">
    <div class="hero-content">
      <h1><%= newsList[0].title %></h1>
      <p><%= newsList[0].body.substring(0,200) %>...</p>
      <a href="/news/<%= newsList[0].id %>" class="btn-read">Read More</a>
    </div>
  <% } else { %>
    <img src="/uploads/default.jpg" alt="No News">
    <div class="hero-content">
      <h1>No News Yet</h1>
    </div>
  <% } %>
</div>

<div class="news-grid">
  <% newsList.slice(1).forEach(n => { %>
    <div class="news-card">
      <img src="/uploads/<%= n.image %>" alt="News Image">
      <div class="news-card-body">
        <h2><%= n.title %></h2>
        <p><%= n.body.substring(0,100) %>...</p>
        <div class="meta">By <%= n.author %> | <%= n.created_at.toDateString() %></div>
        <a href="/news/<%= n.id %>" class="btn-read">Read More</a>
        <% if(user && (user.role === "admin" || user.id === n.user_id)){ %>
          <a href="/news/<%= n.id %>/edit" class="btn-read">Edit</a>
          <form action="/news/<%= n.id %>/delete" method="POST" style="display:inline;">
            <button type="submit" class="btn-read">Delete</button>
          </form>
        <% } %>
      </div>
    </div>
  <% }) %>
</div>

<%- include("partials/footer") %>
